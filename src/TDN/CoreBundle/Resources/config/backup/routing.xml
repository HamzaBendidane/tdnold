<?xml version="1.0" encoding="UTF-8" ?>

<routes xmlns="http://symfony.com/schema/routing"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd">

    <!-- Tests -->

    <route id="Core_TestPolices" pattern="/test-polices">
        <default key="_controller">CoreBundle:Tests:polices</default>
     </route>

    <route id="Core_TestColorbox" pattern="/test-colorbox">
        <default key="_controller">CoreBundle:Tests:colorbox</default>
     </route>

    <!-- -->

    <route id="_welcome" pattern="/">
        <default key="_controller">CoreBundle:Default:home</default>
    </route>

    <route id="core_homepage" pattern="/core/rubriques/dashboard">
        <default key="_controller">CoreBundle:Rubrique:dashboard</default>
    </route>

    <route id="Core_home" pattern="/home">
        <default key="_controller">CoreBundle:Default:home</default>
    </route>

    <route id="Core_sommaireGeneral" pattern="/sommaire">
        <default key="_controller">CoreBundle:Default:home</default>
    </route>

    <route id="Core_sommaire" pattern="/sommaire/{slug}">
        <default key="_controller">CoreBundle:Default:sommaireRubrique</default>
    </route>

    <route id="Core_sommaire_slashed" pattern="/sommaire/{slug}/">
        <default key="_controller">CoreBundle:Default:sommaireRubrique</default>
    </route>

    <route id="Core_contact" pattern="/contact">
        <default key="_controller">CoreBundle:Default:contact</default>
    </route>

    <route id="Core_adminDashboard" pattern="/admin/tableau-de-bord">
        <default key="_controller">CoreBundle:Admin:dashboard</default>
    </route>

    <route id="Core_sendmail" pattern="/cron/sendmail/{message_limit}/{time_limit}/{recover}">
        <default key="_controller">CoreBundle:Spooler:flushQueue</default>
    </route>

    <route id="Journal_razAlertes" pattern="/alertes/raz">
        <default key="_controller">CoreBundle:Journal:razAlertes</default>
    </route>

    <route id="Spooler_flush" pattern="/spool/flush">
        <default key="_controller">CoreBundle:Spooler:flushQueue</default>
    </route>

    <!-- RSS -->

    <route id="Core_RSSFeed" pattern="/feeds/tdn.{_format}">
        <default key="_controller">CoreBundle:RSS:feed</default>
        <requirement key="_format">rss</requirement>
    </route>

    <route id="Core_RSSFeedByType" pattern="/feeds/{type}.{_format}">
        <default key="_controller">CoreBundle:RSS:feedByContenu</default>
        <requirement key="_format">rss</requirement>
    </route>

    <route id="Core_RSSFeedByRubrique" pattern="/feeds/{type}/{rubrique}.{_format}">
        <default key="_controller">CoreBundle:RSS:feedByRubrique</default>
        <requirement key="_format">rss</requirement>
    </route>

    <!-- Reprise v2 -->

    <route id="Core_equipeLegacy" pattern="/page/equipe.html">
        <default key="_controller">CoreBundle:Legacy:equipe</default>
    </route>

    <route id="Core_equipeLegacy" pattern="/{equipe}.html">
        <default key="_controller">CoreBundle:Legacy:equipe</default>
        <requirement key="equipe">equipe|quisommesnous</requirement>
    </route>

    <route id="Core_infolegalLegacy" pattern="/infolegal.html">
        <default key="_controller">CoreBundle:Legacy:infolegal</default>
    </route>

    <route id="Core_rubriquePrincipaleSommaireLegacy" pattern="/{rubrique}/sommaire/index.{_format}">
        <default key="_controller">CoreBundle:Legacy:sommaireRubrique</default>
        <requirement key="_format">html</requirement>
    </route>

    <route id="Core_rrechercheLegacy" pattern="/all/all/requete/index.html">
        <default key="_controller">CoreBundle:Legacy:recherche</default>
    </route>

    <route id="Core_pageLegacy" pattern="/page/{titre}.{_format}">
        <default key="_controller">CoreBundle:Legacy:page</default>
        <requirement key="_format">html</requirement>
    </route>

    <!--route id="Core_nakedURL" pattern="{slug},{identifiant}.{_format}">
        <default key="_controller">CoreBundle:Legacy:nakedSlug</default>
        <requirement key="_format">html</requirement>
    </route-->

    <route id="Core_oldImageError" pattern="/{slug},{id}.{_format}">
        <default key="_controller">CoreBundle:Legacy:nakedURL</default>
        <requirement key="id">\d+</requirement>
        <requirement key="_format">html</requirement>
    </route>

    <route id="Core_oldIndex" pattern="/index.{suffixe}">
        <default key="_controller">CoreBundle:Legacy:home</default>
        <requirement key="suffixe">php|html</requirement>
    </route>

    <route id="Core_OldRSSArticles" pattern="/rss_articles.xml">
        <default key="_controller">CoreBundle:Apps:articlesRSS</default>
        <requirement key="_format">rss</requirement>
    </route>

    <route id="Core_OldRSSFeedByType" pattern="/rss_tdn_{type}.{_format}">
        <default key="_controller">CoreBundle:Legacy:feedByContenu</default>
        <requirement key="_format">html</requirement>
    </route>

    <route id="Core_sommaireError" pattern="/sommaire">
        <default key="_controller">CoreBundle:Legacy:gone</default>
    </route>

    <route id="Core_oldSuggestions" pattern="/suggestions.html">
        <default key="_controller">CoreBundle:Default:contact</default>
    </route>

    <route id="oldies" pattern="/lepassage.html">
        <default key="_controller">CoreBundle:Default:gone</default>
    </route>

    <route id="oldies" pattern="/version_mobile.html">
        <default key="_controller">CoreBundle:Legacy:home</default>
    </route>

    <!-- Applications -->

    <route id="Core_iPhoneLegacy" pattern="/lib/rss/json_tdn.php">
        <default key="_controller">CoreBundle:Apps:iPhoneFlux</default>
    </route>

    <route id="Core_iPhone" pattern="/lib/rss/v3/json_tdn.php">
        <default key="_controller">CoreBundle:Apps:iPhoneFlux</default>
    </route>

    <route id="Core_iOS" pattern="/ios/feed.{_format}">
        <default key="_controller">CoreBundle:IOS:iOSFlux</default>
       <requirement key="_format">json</requirement>
    </route>

    <route id="Core_iOSAFeatured" pattern="/ios/featured.{_format}">
        <default key="_controller">CoreBundle:IOS:iOSFeatured</default>
       <requirement key="_format">json</requirement>
    </route>

    <!-- RSS -->

    <route id="Core_articlesRSSLegacy" pattern="/lib/rss/articles_tdn.{_format}">
        <default key="_controller">CoreBundle:Apps:iPhoneFlux</default>
        <requirement key="_format">json</requirement>
    </route>

    <route id="Core_articlesRSS" pattern="/articles/feed.{_format}">
        <default key="_controller">CoreBundle:Apps:articlesRSS</default>
        <requirement key="_format">rss</requirement>
    </route>

    <route id="Core_articlesFeed" pattern="/articles/feed">
        <default key="_controller">CoreBundle:Apps:articlesRSS</default>
    </route>

    <route id="Core_conseilsRSS" pattern="/conseils-experts/feed.{_format}">
        <default key="_controller">CoreBundle:Apps:conseilsRSS</default>
        <requirement key="_format">rss</requirement>
    </route>

    <!--oute id="Core_textFlux" pattern="/mobile/feed">
        <default key="_controller">CoreBundle:Apps:testFlux</default>
    </route-->

    <!-- Fakes -->
    <route id="Core_fakes" pattern="/{fake}.{_format}">
        <default key="_controller">CoreBundle:Legacy:home</default>
        <requirement key="fake">uetcqtunm|xpipcjaanedujc|hkfkqzedt|ipgoxffnxekqy|iuaqshkfepl|pbrxefzmp|twedkynsl</requirement>
        <requirement key="_format">html</requirement>
    </route>

</routes>
